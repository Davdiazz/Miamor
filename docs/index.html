<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flor para Sara - Mi Amor </title>
    <meta name="description" content="Una hermosa flor dibujada especialmente para Sara">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: #000;
            color: #FFA216;
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        #canvas {
            border: 2px solid #FFA216;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(255, 162, 22, 0.3);
            max-width: 90vw;
            max-height: 90vh;
            background: #000;
        }
        .title {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 162, 22, 0.5);
            animation: glow 2s ease-in-out infinite alternate;
        }
        .subtitle {
            font-size: 1rem;
            text-align: center;
            margin-bottom: 30px;
            opacity: 0.8;
        }
        .controls {
            margin-top: 20px;
            text-align: center;
        }
        button {
            background: linear-gradient(45deg, #FFA216, #FFD700);
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 162, 22, 0.3);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 162, 22, 0.5);
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        @keyframes glow {
            from { text-shadow: 0 0 10px rgba(255, 162, 22, 0.5); }
            to { text-shadow: 0 0 20px rgba(255, 162, 22, 1), 0 0 30px rgba(255, 162, 22, 0.8); }
        }
        .heart {
            color: #ff1744;
            font-size: 1.5em;
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .progress {
            margin-top: 10px;
            font-size: 0.9rem;
            opacity: 0.7;
        }
        @media (max-width: 768px) {
            .title { font-size: 1.5rem; }
            .subtitle { font-size: 0.9rem; }
            button { padding: 10px 20px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <div class="title">Flor para Sara <span class="heart"></span></div>
    <div class="subtitle">Un regalo dibujado con amor especialmente para ti</div>
    
    <canvas id="canvas" width="800" height="600"></canvas>
    
    <div class="controls">
        <button id="drawBtn" onclick="startDrawing()"> Dibujar Flor</button>
        <button onclick="clearCanvas()"> Limpiar</button>
        <button onclick="downloadImage()"> Descargar</button>
    </div>
    <div class="progress" id="progress"></div>
    
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const drawBtn = document.getElementById('drawBtn');
        const progressDiv = document.getElementById('progress');
        
        let isDrawing = false;
        let animationId;

        // Configurar canvas
        function setupCanvas() {
            canvas.width = 800;
            canvas.height = 600;
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            progressDiv.textContent = '';
        }

        // Funci贸n para dibujar l铆neas con animaci贸n
        function drawAnimatedLine(x1, y1, x2, y2, color = '#FFA216', lineWidth = 1) {
            return new Promise(resolve => {
                ctx.strokeStyle = color;
                ctx.lineWidth = lineWidth;
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.stroke();
                setTimeout(resolve, 5); // Peque帽a pausa para la animaci贸n
            });
        }

        // Funci贸n para dibujar arcos con animaci贸n
        function drawAnimatedArc(centerX, centerY, radius, startAngle, endAngle, color = '#FFA216', lineWidth = 1) {
            return new Promise(resolve => {
                ctx.strokeStyle = color;
                ctx.lineWidth = lineWidth;
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, startAngle, endAngle);
                ctx.stroke();
                setTimeout(resolve, 5);
            });
        }

        // Funci贸n para dibujar un p茅talo ovalado como en Python Turtle
        async function drawOvalPetal(centerX, centerY, angle, size = 1) {
            const petalLength = 150 * size;
            const petalLayers = 18;
            
            ctx.save();
            ctx.translate(centerX, centerY);
            ctx.rotate(angle);
            
            for (let layer = 0; layer < petalLayers; layer++) {
                const layerRadius = petalLength - (layer * 8);
                if (layerRadius <= 0) break;
                
                ctx.strokeStyle = '#FFA216';
                ctx.lineWidth = 1;
                ctx.beginPath();
                
                // Primera parte del 贸valo - semic铆rculo superior
                ctx.arc(0, 0, layerRadius, 0, Math.PI);
                ctx.stroke();
                
                // Segunda parte del 贸valo - semic铆rculo inferior desplazado
                ctx.beginPath();
                ctx.arc(0, -layerRadius, layerRadius, Math.PI, 2 * Math.PI);
                ctx.stroke();
                
                await new Promise(resolve => setTimeout(resolve, 20));
            }
            
            ctx.restore();
        }

        // Funci贸n para dibujar todos los p茅talos ovalados
        async function drawAllPetals() {
            const centerX = 400;
            const centerY = 300;
            const petalCount = 16; // Como en el original de Python
            
            progressDiv.textContent = 'Dibujando p茅talos ovalados...';
            
            for (let i = 0; i < petalCount; i++) {
                const angle = (i * 22.5) * Math.PI / 180; // 360/16 = 22.5 grados
                await drawOvalPetal(centerX, centerY, angle);
                
                const progress = Math.round(((i + 1) / petalCount) * 100);
                progressDiv.textContent = `Dibujando p茅talo ${i + 1} de ${petalCount}... ${progress}%`;
            }
        }

        // Eliminar funciones que no necesitamos
        async function drawSecondaryPetals() {
            // No necesitamos p茅talos secundarios para replicar el original
            return;
        }

        async function drawFloralDetails(centerX, centerY) {
            // No necesitamos detalles adicionales para replicar el original
            return;
        }

        // Funci贸n para dibujar el centro en espiral simple como en Python
        async function drawCenter() {
            const centerX = 400;
            const centerY = 300;
            const goldenAngle = 137.508 * Math.PI / 180;
            const pointCount = 200; // Como en el original
            
            progressDiv.textContent = 'Dibujando centro en espiral...';
            
            ctx.fillStyle = '#8B4513'; // Color marr贸n para el centro
            
            for (let i = 0; i < pointCount; i++) {
                const r = 4 * Math.sqrt(i);
                const theta = i * goldenAngle;
                const x = centerX + r * Math.cos(theta);
                const y = centerY + r * Math.sin(theta);
                
                ctx.beginPath();
                ctx.arc(x, y, 2, 0, 2 * Math.PI);
                ctx.fill();
                
                if (i % 10 === 0) {
                    const progress = Math.round(((i + 1) / pointCount) * 100);
                    progressDiv.textContent = `Dibujando centro... ${progress}%`;
                    await new Promise(resolve => setTimeout(resolve, 30));
                }
            }
        }

        // Funci贸n para dibujar texto simple como en Python
        async function drawPixelText() {
            progressDiv.textContent = 'Escribiendo SARA...';
            
            const centerX = 400;
            const centerY = 300;
            const pixelSize = 4;
            
            // Letras simples como en el original de Python
            const letters = {
                S: [
                    [1,1,1,1,1],
                    [1,0,0,0,0],
                    [1,0,0,0,0],
                    [1,1,1,1,0],
                    [0,0,0,0,1],
                    [0,0,0,0,1],
                    [1,1,1,1,1]
                ],
                A: [
                    [0,1,1,1,0],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,1,1,1,1],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,0,0,0,1]
                ],
                R: [
                    [1,1,1,1,0],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,1,1,1,0],
                    [1,0,1,0,0],
                    [1,0,0,1,0],
                    [1,0,0,0,1]
                ]
            };
            
            const word = ['S', 'A', 'R', 'A'];
            const letterSpacing = 40;
            const startX = centerX - (word.length * letterSpacing) / 2;
            
            ctx.fillStyle = '#FFFFFF';
            
            for (let letterIndex = 0; letterIndex < word.length; letterIndex++) {
                const letter = letters[word[letterIndex]];
                const letterX = startX + letterIndex * letterSpacing;
                
                for (let row = 0; row < letter.length; row++) {
                    for (let col = 0; col < letter[row].length; col++) {
                        if (letter[row][col] === 1) {
                            const pixelX = letterX + col * pixelSize;
                            const pixelY = centerY - 20 + row * pixelSize;
                            
                            ctx.fillRect(pixelX, pixelY, pixelSize, pixelSize);
                            await new Promise(resolve => setTimeout(resolve, 50));
                        }
                    }
                }
            }
        }

        // Funci贸n principal para dibujar la flor completa
        async function startDrawing() {
            if (isDrawing) return;
            
            isDrawing = true;
            drawBtn.disabled = true;
            
            clearCanvas();
            
            try {
                // Dibujar p茅talos ovalados como en Python
                await drawAllPetals();
                
                // Dibujar centro en espiral
                await drawCenter();
                
                // Dibujar texto SARA
                await drawPixelText();
                
                progressDiv.textContent = '隆Flor completada exactamente como en Python! ';
                
            } catch (error) {
                console.error('Error al dibujar:', error);
                progressDiv.textContent = 'Error al dibujar la flor';
            } finally {
                isDrawing = false;
                drawBtn.disabled = false;
            }
        }

        function downloadImage() {
            const link = document.createElement('a');
            link.download = 'flor-para-sara.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        // Inicializar
        window.addEventListener('load', () => {
            setupCanvas();
        });

        // Responsive canvas
        function resizeCanvas() {
            const container = canvas.parentElement;
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            
            const scale = Math.min(containerWidth / 800, containerHeight / 600, 1);
            canvas.style.transform = `scale(${scale})`;
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
    </script>
</body>
</html>